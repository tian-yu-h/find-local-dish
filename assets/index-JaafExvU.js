import{OpenAI as s}from"https://cdn.skypack.dev/openai@4.0.0";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=n(t);fetch(t.href,e)}})();const d=new s({apiKey:void 0,dangerouslyAllowBrowser:!0});document.getElementById("foodForm").addEventListener("submit",async function(i){i.preventDefault(),console.log("Form submitted");const o=[document.getElementById("like1").value,document.getElementById("like2").value,document.getElementById("like3").value,document.getElementById("like4").value,document.getElementById("like5").value].filter(e=>e.trim()!=="").join(", "),n=[document.getElementById("dislike1").value,document.getElementById("dislike2").value,document.getElementById("dislike3").value,document.getElementById("dislike4").value,document.getElementById("dislike5").value].filter(e=>e.trim()!=="").join(", "),l=[document.getElementById("allergy1").value,document.getElementById("allergy2").value,document.getElementById("allergy3").value].filter(e=>e.trim()!=="").join(", "),t=document.getElementById("location").value;try{console.log("Sending request with:",{likedFoods:o,dislikedFoods:n,location:t});const e=await d.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that suggests local dishes based on food preferences, allergies, and location."},{role:"user",content:`I like ${o}. I dislike ${n}. I'm allergic to ${l}. I'm in ${t}. Suggest a local dish.`}]});console.log("Response received:",e),document.getElementById("result").innerHTML=`
      <h2>Suggested Local Dish:</h2>
      <p>${e.choices[0].message.content}</p>
    `}catch(e){console.error("Detailed Error:",e),document.getElementById("result").innerHTML="<p>An error occurred. Please try again.</p>"}});
